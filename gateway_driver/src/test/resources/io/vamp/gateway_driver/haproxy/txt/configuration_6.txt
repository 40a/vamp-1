global
  pidfile /opt/vamp/haproxy.pid
  daemon
  maxconn 4096
  log /opt/vamp/haproxy.log.sock local0


 defaults
   log global
   mode http
   option dontlognull
   option redispatch
   option clitcpka
   option srvtcpka
   option http-keep-alive

   retries 3
   maxconn 500000

   # slowloris protection: clients should send their full http request in the configured time
   timeout http-request 5s

   timeout connect 5000ms
   timeout client 50000ms
   timeout server 50000ms

listen stats :1988
   mode http
   stats enable
   stats uri /
   stats refresh 2s
   stats realm Haproxy\ Stats
   stats auth haproxy:haproxy

### BEGIN GENERATED SECTION ###

frontend d5c3c612_6fb3_41e5_8023_292ce3c74924_backend_8080
    
    bind 0.0.0.0:33003
    

     option httplog 
    


    ###
    #
    # Set logging and set the headers to capture

    # capture request header X-Vamp-Server-CurrentTime len 50
    # capture response header X-Vamp-Server-ResponseTime len 50
    # capture response header X-Vamp-Server-Name len 50


    log-format {"ci":"%ci","cp":%cp,"t":"%t","ft":"%ft","b":"%b","s":"%s","Tq":%Tq,"Tw":%Tw,"Tc":%Tc,"Tr":%Tr,"Tt":%Tt,"ST":%ST,"B":%B,"CC":"%CC","CS":"%CS","tsc":"%tsc","ac":%ac,"fc":%fc,"bc":%bc,"sc":%sc,"rc":%rc,"sq":%sq,"bq":%bq,"hr":"%hr","hs":"%hs","r":%{+Q}r}

    #
    ###

    

    mode http
    

    ###
    #
    # Spike/Rate Limiting & Quota Management
    #
    # We use a stick table to keep track of TCP connections rates and bytes send out.
    # On these metrics we set rules to designate upper limits. When limits are hit
    # we reroute the traffic to a specific abusers backend

     # end HTTP spike limit generation

     # end spike limit generation

    ###
    # Filter Management
    #
    # set filters with optional negation
    #

    

    default_backend d5c3c612_6fb3_41e5_8023_292ce3c74924_backend_8080


frontend d5c3c612_6fb3_41e5_8023_292ce3c74924_backend_8080__sava_backend_1_3_0
    

     option httplog 
    


    ###
    #
    # Set logging and set the headers to capture

    # capture request header X-Vamp-Server-CurrentTime len 50
    # capture response header X-Vamp-Server-ResponseTime len 50
    # capture response header X-Vamp-Server-Name len 50


    log-format {"ci":"%ci","cp":%cp,"t":"%t","ft":"%ft","b":"%b","s":"%s","Tq":%Tq,"Tw":%Tw,"Tc":%Tc,"Tr":%Tr,"Tt":%Tt,"ST":%ST,"B":%B,"CC":"%CC","CS":"%CS","tsc":"%tsc","ac":%ac,"fc":%fc,"bc":%bc,"sc":%sc,"rc":%rc,"sq":%sq,"bq":%bq,"hr":"%hr","hs":"%hs","r":%{+Q}r}

    #
    ###

    
    bind unix@/opt/vamp/1c06647def2154787008cb74a4e9cdb0d414d5d8.sock accept-proxy
    

    mode http
    

    ###
    #
    # Spike/Rate Limiting & Quota Management
    #
    # We use a stick table to keep track of TCP connections rates and bytes send out.
    # On these metrics we set rules to designate upper limits. When limits are hit
    # we reroute the traffic to a specific abusers backend

     # end HTTP spike limit generation

     # end spike limit generation

    ###
    # Filter Management
    #
    # set filters with optional negation
    #

    

    default_backend d5c3c612_6fb3_41e5_8023_292ce3c74924_backend_8080__sava_backend_1_3_0


frontend d5c3c612_6fb3_41e5_8023_292ce3c74924_sava_8080
    
    bind 0.0.0.0:33002
    

     option httplog 
    


    ###
    #
    # Set logging and set the headers to capture

    # capture request header X-Vamp-Server-CurrentTime len 50
    # capture response header X-Vamp-Server-ResponseTime len 50
    # capture response header X-Vamp-Server-Name len 50


    log-format {"ci":"%ci","cp":%cp,"t":"%t","ft":"%ft","b":"%b","s":"%s","Tq":%Tq,"Tw":%Tw,"Tc":%Tc,"Tr":%Tr,"Tt":%Tt,"ST":%ST,"B":%B,"CC":"%CC","CS":"%CS","tsc":"%tsc","ac":%ac,"fc":%fc,"bc":%bc,"sc":%sc,"rc":%rc,"sq":%sq,"bq":%bq,"hr":"%hr","hs":"%hs","r":%{+Q}r}

    #
    ###

    

    mode http
    

    ###
    #
    # Spike/Rate Limiting & Quota Management
    #
    # We use a stick table to keep track of TCP connections rates and bytes send out.
    # On these metrics we set rules to designate upper limits. When limits are hit
    # we reroute the traffic to a specific abusers backend

     # end HTTP spike limit generation

     # end spike limit generation

    ###
    # Filter Management
    #
    # set filters with optional negation
    #

    

    default_backend d5c3c612_6fb3_41e5_8023_292ce3c74924_sava_8080


frontend d5c3c612_6fb3_41e5_8023_292ce3c74924_sava_8080__sava_frontend_1_3_0
    

     option httplog 
    


    ###
    #
    # Set logging and set the headers to capture

    # capture request header X-Vamp-Server-CurrentTime len 50
    # capture response header X-Vamp-Server-ResponseTime len 50
    # capture response header X-Vamp-Server-Name len 50


    log-format {"ci":"%ci","cp":%cp,"t":"%t","ft":"%ft","b":"%b","s":"%s","Tq":%Tq,"Tw":%Tw,"Tc":%Tc,"Tr":%Tr,"Tt":%Tt,"ST":%ST,"B":%B,"CC":"%CC","CS":"%CS","tsc":"%tsc","ac":%ac,"fc":%fc,"bc":%bc,"sc":%sc,"rc":%rc,"sq":%sq,"bq":%bq,"hr":"%hr","hs":"%hs","r":%{+Q}r}

    #
    ###

    
    bind unix@/opt/vamp/83bea7dadc8ccb3d126c78d04b59acc9b9caa6df.sock accept-proxy
    

    mode http
    

    ###
    #
    # Spike/Rate Limiting & Quota Management
    #
    # We use a stick table to keep track of TCP connections rates and bytes send out.
    # On these metrics we set rules to designate upper limits. When limits are hit
    # we reroute the traffic to a specific abusers backend

     # end HTTP spike limit generation

     # end spike limit generation

    ###
    # Filter Management
    #
    # set filters with optional negation
    #

    

    default_backend d5c3c612_6fb3_41e5_8023_292ce3c74924_sava_8080__sava_frontend_1_3_0


frontend d5c3c612_6fb3_41e5_8023_292ce3c74924_9050
    
    bind 0.0.0.0:9050
    

     option httplog 
    


    ###
    #
    # Set logging and set the headers to capture

    # capture request header X-Vamp-Server-CurrentTime len 50
    # capture response header X-Vamp-Server-ResponseTime len 50
    # capture response header X-Vamp-Server-Name len 50


    log-format {"ci":"%ci","cp":%cp,"t":"%t","ft":"%ft","b":"%b","s":"%s","Tq":%Tq,"Tw":%Tw,"Tc":%Tc,"Tr":%Tr,"Tt":%Tt,"ST":%ST,"B":%B,"CC":"%CC","CS":"%CS","tsc":"%tsc","ac":%ac,"fc":%fc,"bc":%bc,"sc":%sc,"rc":%rc,"sq":%sq,"bq":%bq,"hr":"%hr","hs":"%hs","r":%{+Q}r}

    #
    ###

    

    mode http
    

    ###
    #
    # Spike/Rate Limiting & Quota Management
    #
    # We use a stick table to keep track of TCP connections rates and bytes send out.
    # On these metrics we set rules to designate upper limits. When limits are hit
    # we reroute the traffic to a specific abusers backend

     # end HTTP spike limit generation

     # end spike limit generation

    ###
    # Filter Management
    #
    # set filters with optional negation
    #

    

    default_backend d5c3c612_6fb3_41e5_8023_292ce3c74924_9050


frontend d5c3c612_6fb3_41e5_8023_292ce3c74924_9050__sava_port
    

     option httplog 
    


    ###
    #
    # Set logging and set the headers to capture

    # capture request header X-Vamp-Server-CurrentTime len 50
    # capture response header X-Vamp-Server-ResponseTime len 50
    # capture response header X-Vamp-Server-Name len 50


    log-format {"ci":"%ci","cp":%cp,"t":"%t","ft":"%ft","b":"%b","s":"%s","Tq":%Tq,"Tw":%Tw,"Tc":%Tc,"Tr":%Tr,"Tt":%Tt,"ST":%ST,"B":%B,"CC":"%CC","CS":"%CS","tsc":"%tsc","ac":%ac,"fc":%fc,"bc":%bc,"sc":%sc,"rc":%rc,"sq":%sq,"bq":%bq,"hr":"%hr","hs":"%hs","r":%{+Q}r}

    #
    ###

    
    bind unix@/opt/vamp/7d8d614f8c1edab2bbc92a03efadd4e4e8275cee.sock accept-proxy
    

    mode http
    

    ###
    #
    # Spike/Rate Limiting & Quota Management
    #
    # We use a stick table to keep track of TCP connections rates and bytes send out.
    # On these metrics we set rules to designate upper limits. When limits are hit
    # we reroute the traffic to a specific abusers backend

     # end HTTP spike limit generation

     # end spike limit generation

    ###
    # Filter Management
    #
    # set filters with optional negation
    #

    

    default_backend d5c3c612_6fb3_41e5_8023_292ce3c74924_9050__sava_port






backend d5c3c612_6fb3_41e5_8023_292ce3c74924_backend_8080
    mode http
#
# Regular HTTP/TCP backends
#

    balance roundrobin 
   



    
        server d5c3c612_6fb3_41e5_8023_292ce3c74924_backend_8080__sava_backend_1_3_0 unix@/opt/vamp/1c06647def2154787008cb74a4e9cdb0d414d5d8.sock send-proxy weight 100
    





backend d5c3c612_6fb3_41e5_8023_292ce3c74924_backend_8080__sava_backend_1_3_0
    mode http
#
# Regular HTTP/TCP backends
#

    balance roundrobin 
   



    option forwardfor
   

   http-response set-header X-Vamp-Server-Name %s
   http-response set-header X-Vamp-Server-ResponseTime %t

   

    cookie vamp_srv insert indirect nocache httponly maxidle 5m maxlife 1h 
    
        server 57c4e3d2cbb8f0db907f5e16ceed9a4241d7e117 192.168.99.100:32770  cookie 57c4e3d2cbb8f0db907f5e16ceed9a4241d7e117  weight 100 maxconn 1000  
    
    
    
    
    
    
    
    
    
    
    





backend d5c3c612_6fb3_41e5_8023_292ce3c74924_sava_8080
    mode http
#
# Regular HTTP/TCP backends
#

    balance roundrobin 
   



    
        server d5c3c612_6fb3_41e5_8023_292ce3c74924_sava_8080__sava_frontend_1_3_0 unix@/opt/vamp/83bea7dadc8ccb3d126c78d04b59acc9b9caa6df.sock send-proxy weight 100
    





backend d5c3c612_6fb3_41e5_8023_292ce3c74924_sava_8080__sava_frontend_1_3_0
    mode http
#
# Regular HTTP/TCP backends
#

    balance roundrobin 
   



    option forwardfor
   

   http-response set-header X-Vamp-Server-Name %s
   http-response set-header X-Vamp-Server-ResponseTime %t

   

    cookie vamp_srv insert indirect nocache httponly maxidle 5m maxlife 1h 
    
        server f1638245acf2ebe6db56984a85b48f6db8c74607 192.168.99.100:32771  cookie f1638245acf2ebe6db56984a85b48f6db8c74607  weight 100 maxconn 1000  
    
    
    
    
    
    
    
    
    
    
    





backend d5c3c612_6fb3_41e5_8023_292ce3c74924_9050
    mode http
#
# Regular HTTP/TCP backends
#

    balance roundrobin 
   



    
        server d5c3c612_6fb3_41e5_8023_292ce3c74924_9050__sava_port unix@/opt/vamp/7d8d614f8c1edab2bbc92a03efadd4e4e8275cee.sock send-proxy weight 100
    





backend d5c3c612_6fb3_41e5_8023_292ce3c74924_9050__sava_port
    mode http
#
# Regular HTTP/TCP backends
#

    balance roundrobin 
   



    option forwardfor
   

   http-response set-header X-Vamp-Server-Name %s
   http-response set-header X-Vamp-Server-ResponseTime %t

   

    cookie vamp_srv insert indirect nocache httponly maxidle 5m maxlife 1h 
    
        server d5c3c612_6fb3_41e5_8023_292ce3c74924_9050 192.168.99.100:33002  cookie d5c3c612_6fb3_41e5_8023_292ce3c74924_9050  weight 100 maxconn 1000  
    
    
    
    
    
    
    
    
    
    
    





#backend abusers
#    mode http
#    errorfile 409 /opt/docker/configuration/error_pages/500rate.http

### END GENERATED SECTION ###