# HAProxy 1.5
global
  pidfile /opt/vamp/haproxy.pid
  daemon
  maxconn 4096
  log /opt/vamp/haproxy.log.sock local0

  defaults
    log global
    mode http
    option dontlognull
    option redispatch
    option clitcpka
    option srvtcpka
    option http-keep-alive
    retries 3
    maxconn 500000

    # slowloris protection: clients should send their full http request in the configured time
    timeout http-request 5s
    timeout connect 5000ms
    timeout client 50000ms
    timeout server 50000ms

  listen stats :1988
    mode http
    stats enable
    stats uri /
    stats refresh 2s
    stats realm Haproxy\ Stats
    stats auth haproxy:haproxy


frontend vamp_1_x_sava_port_-
  bind 0.0.0.0:33001             
  
  option httplog
  log-format {"ci":"%ci","cp":%cp,"t":"%t","ft":"%ft","b":"%b","s":"%s","Tq":%Tq,"Tw":%Tw,"Tc":%Tc,"Tr":%Tr,"Tt":%Tt,"ST":%ST,"B":%B,"CC":"%CC","CS":"%CS","tsc":"%tsc","ac":%ac,"fc":%fc,"bc":%bc,"sc":%sc,"rc":%rc,"sq":%sq,"bq":%bq,"hr":"%hr","hs":"%hs","r":%{+Q}r}
  
  

  
  

  mode http

  
  ###
  #
  # Filter Management
  #
  # Set filters with optional negation.
  #
  ###
  
  default_backend vamp_1_x_sava_port_-

frontend vamp_1_x_sava_port_-_vamp_1_x_sava_sava_1_0_0_port
  
  
  option httplog
  log-format {"ci":"%ci","cp":%cp,"t":"%t","ft":"%ft","b":"%b","s":"%s","Tq":%Tq,"Tw":%Tw,"Tc":%Tc,"Tr":%Tr,"Tt":%Tt,"ST":%ST,"B":%B,"CC":"%CC","CS":"%CS","tsc":"%tsc","ac":%ac,"fc":%fc,"bc":%bc,"sc":%sc,"rc":%rc,"sq":%sq,"bq":%bq,"hr":"%hr","hs":"%hs","r":%{+Q}r}
  
  

  
  bind unix@/opt/vamp/94ec2082c62403bfed22d71fe4f38229330ebd27.sock accept-proxy 

  mode http

  
  ###
  #
  # Filter Management
  #
  # Set filters with optional negation.
  #
  ###
  
  default_backend vamp_1_x_sava_port_-_vamp_1_x_sava_sava_1_0_0_port

frontend vamp_2_x_sava_port_-
  bind 0.0.0.0:33001             
  
  option httplog
  log-format {"ci":"%ci","cp":%cp,"t":"%t","ft":"%ft","b":"%b","s":"%s","Tq":%Tq,"Tw":%Tw,"Tc":%Tc,"Tr":%Tr,"Tt":%Tt,"ST":%ST,"B":%B,"CC":"%CC","CS":"%CS","tsc":"%tsc","ac":%ac,"fc":%fc,"bc":%bc,"sc":%sc,"rc":%rc,"sq":%sq,"bq":%bq,"hr":"%hr","hs":"%hs","r":%{+Q}r}
  
  

  
  

  mode http

  
  ###
  #
  # Filter Management
  #
  # Set filters with optional negation.
  #
  ###
  
  default_backend vamp_2_x_sava_port_-

frontend vamp_2_x_sava_port_-_vamp_2_x_sava_sava_2_0_0_port
  
  
  option httplog
  log-format {"ci":"%ci","cp":%cp,"t":"%t","ft":"%ft","b":"%b","s":"%s","Tq":%Tq,"Tw":%Tw,"Tc":%Tc,"Tr":%Tr,"Tt":%Tt,"ST":%ST,"B":%B,"CC":"%CC","CS":"%CS","tsc":"%tsc","ac":%ac,"fc":%fc,"bc":%bc,"sc":%sc,"rc":%rc,"sq":%sq,"bq":%bq,"hr":"%hr","hs":"%hs","r":%{+Q}r}
  
  

  
  bind unix@/opt/vamp/bdecefb6a0fe1e1cd1093f701284e1486cba0c76.sock accept-proxy 

  mode http

  
  ###
  #
  # Filter Management
  #
  # Set filters with optional negation.
  #
  ###
  
  default_backend vamp_2_x_sava_port_-_vamp_2_x_sava_sava_2_0_0_port

frontend vamp_-_-_-
  bind 0.0.0.0:9050             
  
  option httplog
  log-format {"ci":"%ci","cp":%cp,"t":"%t","ft":"%ft","b":"%b","s":"%s","Tq":%Tq,"Tw":%Tw,"Tc":%Tc,"Tr":%Tr,"Tt":%Tt,"ST":%ST,"B":%B,"CC":"%CC","CS":"%CS","tsc":"%tsc","ac":%ac,"fc":%fc,"bc":%bc,"sc":%sc,"rc":%rc,"sq":%sq,"bq":%bq,"hr":"%hr","hs":"%hs","r":%{+Q}r}
  
  

  
  

  mode http

  
  ###
  #
  # Filter Management
  #
  # Set filters with optional negation.
  #
  ###
  
  default_backend vamp_-_-_-

frontend vamp_-_-_-_vamp_1_x_sava_port_-
  
  
  option httplog
  log-format {"ci":"%ci","cp":%cp,"t":"%t","ft":"%ft","b":"%b","s":"%s","Tq":%Tq,"Tw":%Tw,"Tc":%Tc,"Tr":%Tr,"Tt":%Tt,"ST":%ST,"B":%B,"CC":"%CC","CS":"%CS","tsc":"%tsc","ac":%ac,"fc":%fc,"bc":%bc,"sc":%sc,"rc":%rc,"sq":%sq,"bq":%bq,"hr":"%hr","hs":"%hs","r":%{+Q}r}
  
  

  
  bind unix@/opt/vamp/225cba0a38ff23124d6db98ab6c1e9abff810769.sock accept-proxy 

  mode http

  
  ###
  #
  # Filter Management
  #
  # Set filters with optional negation.
  #
  ###
  
  default_backend vamp_-_-_-_vamp_1_x_sava_port_-

frontend vamp_-_-_-_vamp_2_x_sava_port_-
  
  
  option httplog
  log-format {"ci":"%ci","cp":%cp,"t":"%t","ft":"%ft","b":"%b","s":"%s","Tq":%Tq,"Tw":%Tw,"Tc":%Tc,"Tr":%Tr,"Tt":%Tt,"ST":%ST,"B":%B,"CC":"%CC","CS":"%CS","tsc":"%tsc","ac":%ac,"fc":%fc,"bc":%bc,"sc":%sc,"rc":%rc,"sq":%sq,"bq":%bq,"hr":"%hr","hs":"%hs","r":%{+Q}r}
  
  

  
  bind unix@/opt/vamp/4254eb5ec2c4d56d5a8dfb430c324848e6569693.sock accept-proxy 

  mode http

  
  ###
  #
  # Filter Management
  #
  # Set filters with optional negation.
  #
  ###
  
  default_backend vamp_-_-_-_vamp_2_x_sava_port_-



backend vamp_1_x_sava_port_-
  mode http
  balance roundrobin       
  
  

  
  server vamp_1_x_sava_port_-_vamp_1_x_sava_sava_1_0_0_port unix@/opt/vamp/94ec2082c62403bfed22d71fe4f38229330ebd27.sock send-proxy weight 100 
  
  

backend vamp_1_x_sava_port_-_vamp_1_x_sava_sava_1_0_0_port
  mode http
  balance roundrobin       
  
  

  
  

  option forwardfor
  
  server 64435a223bddf1fa589135baa5e228090279c032 192.168.99.100:32770 cookie 64435a223bddf1fa589135baa5e228090279c032 weight 100 maxconn 1000  
  

  
  
  
  
  
  
  
  
  
  
  
  

backend vamp_2_x_sava_port_-
  mode http
  balance roundrobin       
  
  

  
  server vamp_2_x_sava_port_-_vamp_2_x_sava_sava_2_0_0_port unix@/opt/vamp/bdecefb6a0fe1e1cd1093f701284e1486cba0c76.sock send-proxy weight 100 
  
  

backend vamp_2_x_sava_port_-_vamp_2_x_sava_sava_2_0_0_port
  mode http
  balance roundrobin       
  
  

  
  

  option forwardfor
  
  server 64435a223bddf1fa589135baa5e228090279c032 192.168.99.101:32771 cookie 64435a223bddf1fa589135baa5e228090279c032 weight 100 maxconn 1000  
  

  
  
  
  
  
  
  
  
  
  
  
  

backend vamp_-_-_-
  mode http
  balance roundrobin       
  
  

  
  server vamp_-_-_-_vamp_1_x_sava_port_- unix@/opt/vamp/225cba0a38ff23124d6db98ab6c1e9abff810769.sock send-proxy weight 90 
  
  server vamp_-_-_-_vamp_2_x_sava_port_- unix@/opt/vamp/4254eb5ec2c4d56d5a8dfb430c324848e6569693.sock send-proxy weight 10 
  
  

backend vamp_-_-_-_vamp_1_x_sava_port_-
  mode http
  balance roundrobin       
  
  

  
  

  option forwardfor
  
  server 64435a223bddf1fa589135baa5e228090279c032 192.168.99.100:32772 cookie 64435a223bddf1fa589135baa5e228090279c032 weight 100 maxconn 1000  
  

  
  
  
  
  
  
  
  
  
  
  
  

backend vamp_-_-_-_vamp_2_x_sava_port_-
  mode http
  balance roundrobin       
  
  

  
  

  option forwardfor
  
  server 9019c00f1f7f641c4efc7a02c6f44e9f90d7750 192.168.99.100:32773 cookie 9019c00f1f7f641c4efc7a02c6f44e9f90d7750 weight 100 maxconn 1000  
  

  
  
  
  
  
  
  
  